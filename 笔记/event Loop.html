<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 宏事件完成后 运行微事件 如此反复

      //   // 首先遇见setTimeout，挂入宏事件，不打印
      //   // Promise的构造函数是同步执行，所以打印"马上执行for循环啦",then为异步挂入微事件
      //   //主线程还剩个打印，"代码执行结束"打印完成后第一个事件循环完成开始执行微任务
      //   // 打印"执行then函数啦",打印完成后开始下一个宏任务，便打印"定时器开始啦"
      //   setTimeout(function () {
      //     console.log("定时器开始啦");
      //   });
      //   new Promise(function (resolve) {
      //     console.log("马上执行for循环啦");
      //     for (var i = 0; i < 10000; i++) {
      //       i == 99 && resolve();
      //     }
      //   }).then(function () {
      //     console.log("执行then函数啦");
      //   });
      //   console.log("代码执行结束");

      // 1 7 8 2 4 5 9 11 12
      // console.log("1");
      // setTimeout(function () {
      //   console.log("2");
      //   new Promise(function (resolve) {
      //     console.log("4");
      //     resolve();
      //   }).then(function () {
      //     console.log("5");
      //   });
      // });
      // new Promise(function (resolve) {
      //   console.log("7");
      //   resolve();
      // }).then(function () {
      //   console.log("8");
      // });
      // setTimeout(function () {
      //   console.log("9");
      //   new Promise(function (resolve) {
      //     console.log("11");
      //     resolve();
      //   }).then(function () {
      //     console.log("12");
      //   });
      // });

      console.log(1);
      setTimeout(function () {
        console.log(2);
      }, 0);
      new Promise((resolve) => {
        console.log(3);
        resolve();
      }).then(() => {
        console.log(4);
      });
      console.log(5);
    </script>
  </body>
</html>
